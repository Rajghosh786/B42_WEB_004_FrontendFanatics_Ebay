<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ebay Clone</title>
    <link rel="stylesheet" href="./css/styles.css" />
    <script
      src="https://kit.fontawesome.com/d792cef6f0.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <!-- below is the nav part that needs to be copy paste all the time -->
    <nav class="navbar-t">
      <button class="menu-toggle"><i class="fa-solid fa-bars"></i></button>
      <div class="left">
        <!-- Auth Links will be dynamically updated here -->
        <p id="auth-links">
          Hi! <a href="./html/login.html">Sign in</a> or
          <a href="./html/signup.html">register</a>
        </p>
        <p><a href="./html/ebayDailyDeals.html">Daily Deals</a></p>
        <p><a href="./html/brandoutlet.html">Brand Outlet</a></p>
        <p><a href="./html/giftcard.html">Gift Cards</a></p>
        <p><a href="./html/help&contact.html">Help & Support</a></p>
      </div>
      <ul class="menu">
        <li><a href="./html/sell.html">Sell</a></li>
        <li>
          <a href="./html/wishlist.html">Wishlist</a>
          <i class="fa-solid fa-angle-down"></i>
        </li>
        <li>
          <a href="./html/cart.html">My eBay</a>
          <i class="fa-solid fa-angle-down"></i>
        </li>
        <a href="#"><i class="fa-regular fa-bell"></i></a>
        <a href="./html/shoppingcart.html"
          ><i class="fa-solid fa-cart-shopping"></i
        ></a>
      </ul>
    </nav>

    <nav class="navbar-b">
        <a href="index.html"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/EBay_logo.svg/1200px-EBay_logo.svg.png" alt="eBay Logo" class="w-32" /></a>
      <div class="category-dropdown">
        <p class="category-btn">
          Shop by Category <i class="fa-solid fa-angle-down"></i>
        </p>
        <div class="dropdown-content">
          <div class="column">
            <h4>Motors</h4>
            <p>Parts & Accessories</p>
            <p>Cars & Trucks</p>
            <p>Motorcycles</p>
            <p>Other Vehicles</p>
          </div>
          <div class="column">
            <h4>Electronics</h4>
            <p>Computers, Tablets & Network Hardware</p>
            <p>Cell Phones, Smart Watches & Accessories</p>
            <p>Video Games & Consoles</p>
            <p>Cameras & Photo</p>
          </div>
          <div class="column">
            <h4>Collectibles & Art</h4>
            <p>Trading Cards</p>
            <p>Collectibles</p>
            <p>Coins & Paper Money</p>
            <p>Sports Memorabilia</p>
          </div>
          <div class="column">
            <h4>Home & Garden</h4>
            <p>Yard, Garden & Outdoor Living Items</p>
            <p>Tools & Workshop Equipment</p>
            <p>Home Improvement</p>
            <p>Kitchen, Dining & Bar Supplies</p>
          </div>
        </div>
      </div>
      <div class="search-container">
        <i class="fa-solid fa-magnifying-glass"></i>
        <input
          type="text"
          placeholder="Search for anything"
          class="search-input"
        />
        <select class="category-dropdown">
          <option>All Categories</option>
          <option>Electronics</option>
          <option>Fashion</option>
          <option>Home & Garden</option>
          <option>Jewellery</option>
          <option>Men's Wear</option>
          <option>Women's Wear</option>
        </select>
      </div>
      <button class="search-button">Search</button>
      <a href="./html/ebayAdvance.html" class="advanced-search">Advanced</a>
    </nav>
    <hr />
    <main>
      <section>
        <ul class="body-category">
          <li><a href="#">Explore (New!)</a></li>
          <li><a href="#">Saved</a></li>
          <li><a href="#">Electronics</a></li>
          <li><a href="#">Motors</a></li>
          <li><a href="#">Fashion</a></li>
          <li><a href="#">Collection and Art</a></li>
          <li><a href="#">Sports</a></li>
          <li><a href="#">Health & Beauty</a></li>
          <li><a href="#">Industrial equipment</a></li>
          <li><a href="#">Home & Garden</a></li>
          <li><a href="#">Deals</a></li>
          <li><a href="#">Sell</a></li>
        </ul>
      </section>
      <section>
        <div class="banner">
          <div class="banner-content">
            <h1>Limitless love, limitless luxury</h1>
            <p>Save 15% on luxury fashion accessories for Valentine's Day.</p>
            <button class="shop-btn">Shop luxury</button>
            <p class="terms"><a href="#">*See Terms & Conditions</a></p>
          </div>
          <div class="banner-image">
            <img
              src="https://i.ebayimg.com/images/g/hzcAAOSwWupnojal/s-l960.webp"
              alt="Luxury Offer"
            />
          </div>
        </div>
      </section>

      <section>
        <div class="heading">
          <h1>Explore Popular Categories</h1>
        </div>
        <div class="box5">
          <div class="circle">
            <img src="images/1.png" alt="Toys" height="200px" />
            <p>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Toys
            </p>
          </div>
          <div class="circle">
            <img src="images/2.png" alt="Cards" height="200px" />
            <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Trading Cards</p>
          </div>
          <div class="circle">
            <img src="images/3.png" alt="Refurbished" height="200px" />
            <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Refurbished</p>
          </div>
          <div class="circle">
            <img src="images/4.png" alt="Sneakers" height="200px" />
            <p>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sneakers
            </p>
          </div>
          <div class="circle">
            <img src="images/5.png" alt="tire" height="200px" />
            <p>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P&A
            </p>
          </div>

          <div class="circle">
            <img src="images/7.png" alt="bag" height="200px" />
            <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pre-loved Luxury</p>
          </div>
        </div>
      </section>

      <section>
        <div class="parent-fav">
          <div class="fav">
            <h1>Shopping made easy</h1>
            <p>Enjoy reliability, secure deliveries and hassle-free returns.</p>
          </div>
          <div class="btn-fav">
            <div class="btn1">
              <button>Start now</button>
            </div>
          </div>
        </div>
      </section>

      <section>
        <div class="banner">
          <div class="banner-content">
            <h1>Love beyond labels</h1>
            <p>
              Save 15% on luxury fashion accessories that say more than words.
            </p>
            <button class="shop-btn">Shop luxury</button>
            <p class="terms"><a href="#">*See Terms & Conditions</a></p>
          </div>
          <div class="banner-image">
            <img
              src="https://i.ebayimg.com/images/g/r6YAAOSw~lhnojaE/s-l960.webp"
              alt="Luxury Offer"
            />
          </div>
        </div>
        <br /><br />
      </section>
    </main>

    <footer>
      <div class="footer-container">
        <div class="footer-column">
          <h3>Buy</h3>
          <ul>
            <li><a href="#">Registration</a></li>
            <li><a href="#">Bidding & buying help</a></li>
            <li><a href="#">Stores</a></li>
            <li><a href="#">Curator Collections</a></li>
            <li><a href="#">eBay for Charity</a></li>
            <li><a href="#">Charity Shop</a></li>
            <li><a href="#">Seasonal Sales and events</a></li>
            <li><a href="#">eBay Gift Cards</a></li>
          </ul>
        </div>

        <div class="footer-column">
          <h3>Sell</h3>
          <ul>
            <li><a href="#">Start selling</a></li>
            <li><a href="#">How to sell</a></li>
            <li><a href="#">Business sellers</a></li>
            <li><a href="#">Affiliates</a></li>
          </ul>
          <h3>Tools & apps</h3>
          <ul>
            <li><a href="#">Developers</a></li>
            <li><a href="#">Security center</a></li>
            <li><a href="#">Site map</a></li>
          </ul>
        </div>

        <div class="footer-column">
          <h3>eBay companies</h3>
          <ul>
            <li><a href="#">TCGplayer</a></li>
          </ul>
          <h3>Stay connected</h3>
          <ul class="social-links">
            <li>
              <a href="#"><i class="fa-brands fa-facebook"></i>Facebook</a>
            </li>
            <li>
              <a href="#"><i class="fa-brands fa-x-twitter"></i>Twitter</a>
            </li>
          </ul>
        </div>

        <div class="footer-column">
          <h3>About eBay</h3>
          <ul>
            <li><a href="#">Company info</a></li>
            <li><a href="#">News</a></li>
            <li><a href="#">Investors</a></li>
            <li><a href="#">Careers</a></li>
            <li><a href="#">Diversity & Inclusion</a></li>
            <li><a href="#">Global Impact</a></li>
            <li><a href="#">Government relations</a></li>
            <li><a href="#">Advertise with us</a></li>
            <li><a href="#">Policies</a></li>
          </ul>
        </div>

        <div class="footer-column">
          <h3>Help & Contact</h3>
          <ul>
            <li><a href="#">Seller Center</a></li>
            <li><a href="#">Contact Us</a></li>
            <li><a href="#">eBay Returns</a></li>
            <li><a href="#">eBay Money Back Guarantee</a></li>
          </ul>
          <h3>Community</h3>
          <ul>
            <li><a href="#">Announcements</a></li>
            <li><a href="#">eBay Community</a></li>
            <li><a href="#">eBay for Business Podcast</a></li>
          </ul>
        </div>
      </div>

      <!-- last footer part -->
      <footer class="mt-5 text-sm pt-3 text-center">
        <p>
          Copyright © 1995-2025 eBay Inc. All Rights Reserved.
          <a href="#" class="text-blue-500">Accessibility</a>,
          <a href="#" class="text-blue-500">User Agreement</a>,
          <a href="#" class="text-blue-500">Privacy</a>,
          <a href="#" class="text-blue-500">Payments Terms of Use</a>,
          <a href="#" class="text-blue-500">Cookies</a>,
          <a href="#" class="text-blue-500">CA Privacy Notice</a>,
          <a href="#" class="text-blue-500">Your Privacy Choices</a>, and
          <a href="#" class="text-blue-500">AdChoice</a>.
        </p>
      </footer>
    </footer>
    <div class="fixed bottom-6 right-6 bg-green-500 text-white rounded-full p-4 shadow-lg cursor-pointer hover:bg-green-300 transition duration-300" id="chatButton">
      <img src="./images/botimage.png" height="100px" width="30px" alt="">
    </div>
  
    <div class="fixed bottom-20 right-6 w-96 h-[600px] bg-white border border-gray-300 rounded-lg shadow-lg hidden z-10" id="chatContainer">
      <iframe class="w-full h-full rounded-lg" src="https://landbot.online/v3/H-2776356-69YRO0I17NNLOYVC/index.html" title="Chatbot"></iframe>
    </div>
    <!-- below this -->
    <!-- <h1>User logged in</h1>
<h1 class="user-state"></h1>
<button type="button" class="logout">logout</button>
<ul>
    <li><a href="html/login.html">Login</a></li>
    <li><a href="html/signup.html">Register</a></li>
</ul>

    <script src="./javascript/scrpit.js"></script> -->
  </body>
</html>

<!-- <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
    import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js";
    import { getDatabase, ref, set,get } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js";
    
    
    const firebaseConfig = {
      apiKey: "AIzaSyA-8DveOlIlHvyK813rJbm4q-xTpdtb9n0",
      authDomain: "users-database-e953e.firebaseapp.com",
      databaseURL: "https://users-database-e953e-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "users-database-e953e",
      storageBucket: "users-database-e953e.firebasestorage.app",
      messagingSenderId: "622398829390",
      appId: "1:622398829390:web:930571c5fb5aa985a3641f",
    };
    
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    const userStateDiv = document.querySelector('.user-state');
    const logoutButton = document.querySelector('.logout');
    
    // Check user authentication state
    auth.onAuthStateChanged((user) => {
      const userStateDiv = document.querySelector('.user-state');
      const logoutButton = document.querySelector('.logout');
    
      if (user) {
        console.log('User is logged in:', user);
    
        // fetching username
        const userRef = ref(getDatabase(), 'users/' + user.uid);
        get(userRef).then((snapshot) => {
          if (snapshot.exists()) {
            const userData = snapshot.val();
            userStateDiv.textContent = `User is logged in as: ${userData.personal_Firstname} ${userData.personal_Lastname}`;
          } else {
            userStateDiv.textContent = 'No user data available';
          }
        });
    
        logoutButton.style.display = "inline-block"; 
      } else {
        userStateDiv.textContent = 'No user is logged in';
        logoutButton.style.display = "none"; 
      }
    });
    
    // Logout function
    const logoutUser = () => {
      signOut(auth)
        .then(() => {
          console.log('User logged out');
          window.location.href = '../html/login.html';
        })
        .catch((error) => {
          console.error('Error logging out:', error);
        });
    };
    
    // event listener to logout
    logoutButton.addEventListener("click", logoutUser);
    </script> -->

<!-- <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
    import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js";
    import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js";
  
    const firebaseConfig = {
      apiKey: "AIzaSyA-8DveOlIlHvyK813rJbm4q-xTpdtb9n0",
      authDomain: "users-database-e953e.firebaseapp.com",
      databaseURL: "https://users-database-e953e-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "users-database-e953e",
      storageBucket: "users-database-e953e.firebasestorage.app",
      messagingSenderId: "622398829390",
      appId: "1:622398829390:web:930571c5fb5aa985a3641f",
    };
  
    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    const authLinksDiv = document.getElementById("auth-links");
  
    auth.onAuthStateChanged((user) => {
      if (user) {
        const userRef = ref(getDatabase(), "users/" + user.uid);
        get(userRef).then((snapshot) => {
          if (snapshot.exists()) {
            const userData = snapshot.val();
            authLinksDiv.innerHTML = `
              Hi, ${userData.personal_Firstname}
              <a href="#" class="logout">Logout</a>
            `;
          }
        });
      } else {
        authLinksDiv.innerHTML = `
          Hi! <a href="./html/login.html">Sign in</a> or 
          <a href="./html/signup.html">register</a>
        `;
      }
    });
  
    const logoutUser = () => {
      signOut(auth)
        .then(() => {
          window.location.href = "./html/login.html";
        })
        .catch((error) => {
          console.error("Error logging out:", error);
        });
    };
  
    document.body.addEventListener("click", (event) => {
      if (event.target && event.target.classList.contains("logout")) {
        logoutUser();
      }
    });
  </script> -->

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
  import {
    getAuth,
    signOut,
  } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js";
  import {
    getDatabase,
    ref,
    get,
  } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyA-8DveOlIlHvyK813rJbm4q-xTpdtb9n0",
    authDomain: "users-database-e953e.firebaseapp.com",
    databaseURL:
      "https://users-database-e953e-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "users-database-e953e",
    storageBucket: "users-database-e953e.firebasestorage.app",
    messagingSenderId: "622398829390",
    appId: "1:622398829390:web:930571c5fb5aa985a3641f",
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth();
  const authLinksDiv = document.getElementById("auth-links");


  // Check localStorage for login state
  const checkLoginState = () => {
    const isLoggedIn = localStorage.getItem("isLoggedIn") === "true"; // Check if user is logged in
    if (isLoggedIn) {
      const userName = localStorage.getItem("userName");
      authLinksDiv.innerHTML = `
                Hi, ${userName}
                <a href="#" class="logout">Logout</a>
            `;
    } else {
      authLinksDiv.innerHTML = `
                Hi! <a href="./html/login.html">Sign in</a> or 
                <a href="./html/signup.html">register</a>
            `;
    }
  };


  // Initialize the page by checking login state
  window.onload = checkLoginState;

  // Firebase authentication state listener
  auth.onAuthStateChanged((user) => {
    if (user) {
      // User is logged in, retrieve the user's name from the database
      const userRef = ref(getDatabase(), "users/" + user.uid);
      get(userRef).then((snapshot) => {
        if (snapshot.exists()) {
          const userData = snapshot.val();
          const userFirstName = userData.personal_Firstname; // Use the field for first name
          // Store user info in localStorage
          localStorage.setItem("isLoggedIn", "true");
          localStorage.setItem("userName", userFirstName);
        }
      });
    } else {
      // User is logged out, clear localStorage
      localStorage.setItem("isLoggedIn", "false");
      localStorage.removeItem("userName");
    }
    checkLoginState(); // Update UI based on auth state
  });

  // Logout function
  const logoutUser = () => {
    signOut(auth)
      .then(() => {
        // Clear localStorage on logout
        localStorage.setItem("isLoggedIn", "false");
        localStorage.removeItem("userName");
        window.location.href = "./html/login.html"; // Redirect to login
      })
      .catch((error) => {
        console.error("Error logging out:", error);
      });
  };

  // Event listener for logout link
  document.body.addEventListener("click", (event) => {
    if (event.target && event.target.classList.contains("logout")) {
      logoutUser();
    }
  });

  const searchInput = document.querySelector(".search-input");
  const searchbutton = document.querySelector(".search-button");
  let productName;
  searchInput.addEventListener("input", (e) => {
    productName = e.target.value;
  });


  searchbutton.addEventListener("click", (e) => {
    console.log(productName);

    fetch(
      "https://products-database-7e889-default-rtdb.asia-southeast1.firebasedatabase.app/.json"
    )
      .then((res) => res.json())
      .then((data) => {
        let filteringData = Object.values(data).filter((item) => {
          return (
            item.name &&
            item.name.toLowerCase().includes(productName.toLowerCase())
          );
        });

        // console.log(filteringData);
        // if (filteringData.length > 0) {
        localStorage.setItem('filteredProducts', JSON.stringify(filteringData));
        window.location.href = "./html/laptop.html";
    // }
      })
      .catch((err) => {
        console.error("Error fetching data:", err);
      });
    searchInput.value = "";
  });

    const chatButton = document.getElementById('chatButton');
    const chatContainer = document.getElementById('chatContainer');
    chatButton.addEventListener('click', () => {
      chatContainer.classList.toggle('hidden');
    });
</script>
